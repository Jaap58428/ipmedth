<a-scene renderer="precision: low; antialias: false;" embedded>
  <a-assets>

    <a-curve id="curveBox">
      <a-curve-point position="-4 0.8 -2"></a-curve-point>
      <a-curve-point position="-3 0.6 -2"></a-curve-point>
      <a-curve-point position="-2 0.8 -2"></a-curve-point>
      <a-curve-point position="-1 0.6 -2"></a-curve-point>
      <a-curve-point position="0 0.8 -2"></a-curve-point>
      <a-curve-point position="1 0.6 -2"></a-curve-point>
      <a-curve-point position="2 0.8 -2"></a-curve-point>
      <a-curve-point position="3 0.6 -2"></a-curve-point>
      <a-curve-point position="4 0.8 -2"></a-curve-point>
      <a-curve-point position="5 0.6 -2"></a-curve-point>
      <a-curve-point position="6 0.8 -2"></a-curve-point>
      <a-curve-point position="7 0.6 -2"></a-curve-point>
    </a-curve>

    <a-asset-item id="treehouse-obj" src="vr_assets/assets/Treehouse.obj"></a-asset-item>
    <a-asset-item id="treehouse-mtl" src="vr_assets/assets/Treehouse.mtl"></a-asset-item>
    <a-asset-item id="farm-obj" src="vr_assets/assets/Farm.obj"></a-asset-item>
    <a-asset-item id="farm-mtl" src="vr_assets/assets/Farm.mtl"></a-asset-item>
    <!-- <a-asset-item id="fort-obj" src="vr_assets/assets/SM_Fort.obj"></a-asset-item>
    <a-asset-item id="fort-mtl" src="vr_assets/assets/SM_Fort.mtl"></a-asset-item> -->
    <a-asset-item id="fence2-obj" src="vr_assets/assets/fence2.obj"></a-asset-item>
    <a-asset-item id="fence2-mtl" src="vr_assets/assets/fence2.mtl"></a-asset-item>
    <a-asset-item id="owl-obj" src="vr_assets/assets/Mesh_Owl.obj"></a-asset-item>
    <a-asset-item id="owl-mtl" src="vr_assets/assets/Mesh_Owl.mtl"></a-asset-item>
    <a-asset-item id="log-obj" src="vr_assets/assets/log.obj"></a-asset-item>
    <a-asset-item id="log-mtl" src="vr_assets/assets/log.mtl"></a-asset-item>
    <a-asset-item id="iceberg-obj" src="vr_assets/assets/iceberg.obj"></a-asset-item>
    <a-asset-item id="iceberg-mtl" src="vr_assets/assets/iceberg.mtl"></a-asset-item>
    <a-asset-item id="goat-obj" src="vr_assets/assets/Mesh_Goat.obj"></a-asset-item>
    <a-asset-item id="goat-mtl" src="vr_assets/assets/Mesh_Goat.mtl"></a-asset-item>

    <a-animation id="clickStartAnimation" attribute='scale' dur='2000' from='1 1 1' to='6 6 6' easing="ease-out">
    </a-animation>
    <a-animation id="clickDoneAnimation" attribute='scale' dur='2000' from='6 6 6' to='1 1 1' easing="ease-out">
    </a-animation>
    <!-- <a-animation id="navAniHeight" attribute="height" from="0.2" to="0.8" direction="alternate" repeat="indefinite"
      dur="1500"></a-animation> -->
    <!-- <a-animation id="navAniColour" attribute="color" from="white" to="red" direction="alternate" repeat="indefinite"
      dur="1500"></a-animation> -->

  </a-assets>
  <a-entity id="treehouse" obj-model="obj: #treehouse-obj; mtl: #treehouse-mtl" position="-12.9 -0.28 -10.12"
    scale="0.7 0.7 0.7" rotation="0 89.73 0"></a-entity>
  <a-entity id="farm" obj-model="obj: #farm-obj; mtl: #farm-mtl" position="-6.7 4.988 200" scale="0.3 0.3 0.3"
    rotation="0 140 0"></a-entity>
  <!-- <a-entity id="fort" obj-model="obj: #fort-obj; mtl: #fort-mtl" position="-32.7 1 -169.3" scale="0.4 0.4 0.3"
    rotation="0 140 0"></a-entity> -->
  <a-entity id="fence2_0" obj-model="obj: #fence2-obj; mtl: #fence2-mtl" position="-12.086 1 14.473" scale="1 1 1"
    rotation="0 0 0"></a-entity>
  <a-entity id="fence2_1" obj-model="obj: #fence2-obj; mtl: #fence2-mtl" position="-5.670 1 14.473" scale="1 1 1"
    rotation="0 0 0"></a-entity>
  <a-entity id="fence2_2" obj-model="obj: #fence2-obj; mtl: #fence2-mtl" position="0.872 1 14.473" scale="1 1 1"
    rotation="0 0 0"></a-entity>
  <a-entity id="fence2_3" obj-model="obj: #fence2-obj; mtl: #fence2-mtl" position="7.436 1 14.473" scale="1 1 1"
    rotation="0 0 0"></a-entity>
  <a-entity id="fence2_4" obj-model="obj: #fence2-obj; mtl: #fence2-mtl" position="-16.289 1 9.976" scale="1 1 1"
    rotation="0 90 0"></a-entity>
  <a-entity id="fence2_5" obj-model="obj: #fence2-obj; mtl: #fence2-mtl" position="-16.289 1 3.222" scale="1 1 1"
    rotation="0 90 0"></a-entity>
  <a-entity id="fence2_6" obj-model="obj: #fence2-obj; mtl: #fence2-mtl" position="-16.289 1 -3.621" scale="1 1 1"
    rotation="0 90 0"></a-entity>
  <a-entity id="log" obj-model="obj: #log-obj; mtl: #log-mtl" position="28.335 1 12.778" scale="1.770 1.790 1.810"
    rotation="0 -134.750 0"></a-entity>
  <a-entity id="owl" obj-model="obj: #owl-obj; mtl: #owl-mtl" position="27.901 2.220 14.713" scale="0.02 0.02 0.02"
    rotation="0 -136.150 0"></a-entity>
  <a-entity id="iceberg_0" obj-model="obj: #iceberg-obj; mtl: #iceberg-mtl" position="-78.164 6.475 68.315"
    scale="0.050 0.050 0.050" rotation="108.240 45 0"></a-entity>
  <a-entity id="iceberg_1" obj-model="obj: #iceberg-obj; mtl: #iceberg-mtl" position="-79.574 -0.830 66.572"
    scale="0.110 0.070 0.030" rotation="90 45 0"></a-entity>
  <a-entity id="goat" obj-model="obj: #goat-obj; mtl: #goat-mtl" position="-77.277 16.555 64.357" scale="0.02 0.02 0.02"
    rotation="0 45 0"></a-entity>

  <a-box id="farmground" scale="65 8 45" position="-7.7 2.185 193" color="#bfbf57" opacity="1"></a-box>
  <a-gltf-model src="vr_assets/assets/Wood Bridge and Environment .gltf" scale="0.007 0.007 0.007"
    position="-2 0.29 -8.9">
  </a-gltf-model>
  <a-gltf-model src="vr_assets/assets/Wood Bridge .gltf" scale="0.007 0.007 0.007" position="9.656 -0.77 -8.9"
    rotation="0 0 -13.38"></a-gltf-model>

  <!-- <a-entity particle-system="
         preset: dust;
         color:#42bcf4, #9bd5ef, #fff;
         particleCount:4000;
         positionSpread:50 0.2 1;
         maxAge: 3;
         dragValue: 0.2;
         type: 2;
         " rotation="90 38 110" position="34.5 5.7 -0.4">
  </a-entity> -->

  <a-entity scale="3.3 3.7 3" rotation="0 -125 0" position="0 -0.216 0" environment="preset: forest; dressingAmount: 380;
        fog: 0.35; ground: canyon;
        groundTexture: walkernoise;
        groundColor2: #fcd876; groundColor: #f6c84c;
        dressingScale: 1; dressingVariance: 1.5 2.5 1.5; dressingColor: #2b5412;
        groundYScale: 4;">
  </a-entity>



  <!-- Moving order is dependend on element order below! -->
  <a-entity id="navigationBox">
    <a-cylinder segments-radial="6" data-target="1" position="-6.514 -0.149 10.923" height=".25" radius="0.5">
    </a-cylinder>
    <a-cylinder segments-radial="6" data-target="2" position="10.869 0.048 9.469" height="0.5" radius="0.5" geometry="">
    </a-cylinder>
    <a-cylinder segments-radial="6" data-target="3" position="-2.942 0.049 0.575" height="0.5" radius="0.5">
    </a-cylinder>
    <a-cylinder segments-radial="6" data-target="4" position="12.977 -0.127 0.926" height=".25" radius="0.5">
    </a-cylinder>
    <a-cylinder segments-radial="6" data-target="5" position="18.399 -0.108 -8.371" height=".25" radius="0.5">
    </a-cylinder>
    <a-cylinder segments-radial="6" data-target="6" position="10.955 0.975 -8.684" height=".25" radius="0.5"
      rotation="0 0 -20"></a-cylinder>
    <a-cylinder segments-radial="6" data-target="7" position="5.923 2.468 -9.124" height=".25" radius="0.5">
    </a-cylinder>
    <a-cylinder segments-radial="6" data-target="8" position="4.127 2.468 -15.136" height=".25" radius="0.5">
    </a-cylinder>
    <a-cylinder segments-radial="6" data-target="9" position="4.127 2.673 -5.501" height=".25" radius="0.5">
    </a-cylinder>
    <a-cylinder segments-radial="6" data-target="10" position="2.769 2.451 -8.877" height=".25" radius="0.5">
    </a-cylinder>
    <a-cylinder segments-radial="6" data-target="11" position="-3.213 2.451 -8.877" height=".25" radius="0.5">
    </a-cylinder>
    <a-cylinder segments-radial="6" data-target="12" position="-6.949 2.451 -8.877" height=".25" radius="0.5">
    </a-cylinder>
    <a-cylinder segments-radial="6" data-target="13" position="-9.515 2.451 -8.78" height=".25" radius="0.5">
    </a-cylinder>
    <a-cylinder segments-radial="6" data-target="14" position="-10.925 5.367 -8.78" height=".25" radius="0.5">
    </a-cylinder>
    <a-cylinder segments-radial="6" data-target="15" position="-14.244 5.367 -8.864" height=".25" radius="0.5">
    </a-cylinder>
    <script>
      // define your path connections here relating to the targets above
      // -1 is a endpoint
      pathConnections = {
        1: {
          2: {
            4: {
              5: {
                6: {
                  7: {
                    8: {
                      10: {
                        11: {
                          12: {
                            13: {
                              14: {
                                15: -1
                              }
                            }
                          }
                        }
                      }
                    },
                    9: {
                      10: {
                        11: {
                          12: {
                            13: {
                              14: {
                                15: -1
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          3: {
            4: {
              5: {
                6: {
                  7: {
                    8: {
                      10: {
                        11: {
                          12: {
                            13: {
                              14: {
                                15: -1
                              }
                            }
                          }
                        }
                      }
                    },
                    9: {
                      10: {
                        11: {
                          12: {
                            13: {
                              14: {
                                15: -1
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    </script>
  </a-entity>

  <a-camera id="camera">

    <a-entity id="breath" position="0 -1.2 0.3">
      <a-circle color="red" radius="0.05" position="0 0.8 -2" rotation="0 0 0"
        material="opacity: 0.5; transparant: true">
        <a-animation attribute="position" dur="5000" to="0 0.6 -2" easing="ease-in-out" direction="alternate"
          repeat="indefinite"></a-animation>
      </a-circle>

      <a-draw-curve curveref="#curveBox" material="shader: line; color: blue">
        <a-animation attribute="position" dur="10000" to="-2 0 0" easing="linear" direction="normal"
          repeat="indefinite"></a-animation>
      </a-draw-curve>
    </a-entity>
    <a-entity id="cursor" cursor="fuse: true; fuseTimeout: 2000" position="0 0 -3"
      geometry="primitive: ring; radiusInner: 0.06; radiusOuter: 0.1"
      material="color: black; shader: flat; transparent: true; opacity: 0.5">
    </a-entity>

  </a-camera>

</a-scene>

<script>
  stateController.loadJsFile('js/vr_logic/movement.js')
</script>