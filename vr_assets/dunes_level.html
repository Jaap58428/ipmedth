

<a-scene stats renderer="precision: mediump;">
  <a-assets>
    <a-asset-item id="treehouse-obj" src="vr_assets/assets/Treehouse.obj"></a-asset-item>
    <a-asset-item id="treehouse-mtl" src="vr_assets/assets/Treehouse.mtl"></a-asset-item>
    <a-asset-item id="farm-obj" src="vr_assets/assets/Farm.obj"></a-asset-item>
    <a-asset-item id="farm-mtl" src="vr_assets/assets/Farm.mtl"></a-asset-item>
    <a-asset-item id="fort-obj" src="vr_assets/assets/SM_Fort.obj"></a-asset-item>
    <a-asset-item id="fort-mtl" src="vr_assets/assets/SM_Fort.mtl"></a-asset-item>
    <a-asset-item id="fence2-obj" src="vr_assets/assets/fence2.obj"></a-asset-item>
    <a-asset-item id="fence2-mtl" src="vr_assets/assets/fence2.mtl"></a-asset-item>
    <a-asset-item id="owl-obj" src="vr_assets/assets/Mesh_Owl.obj"></a-asset-item>
    <a-asset-item id="owl-mtl" src="vr_assets/assets/Mesh_Owl.mtl"></a-asset-item>
    <a-asset-item id="log-obj" src="vr_assets/assets/log.obj"></a-asset-item>
    <a-asset-item id="log-mtl" src="vr_assets/assets/log.mtl"></a-asset-item>
    <a-asset-item id="iceberg-obj" src="vr_assets/assets/iceberg.obj"></a-asset-item>
    <a-asset-item id="iceberg-mtl" src="vr_assets/assets/iceberg.mtl"></a-asset-item>
    <a-asset-item id="goat-obj" src="vr_assets/assets/Mesh_Goat.obj"></a-asset-item>
    <a-asset-item id="goat-mtl" src="vr_assets/assets/Mesh_Goat.mtl"></a-asset-item>

    <a-animation id="navAniHeight" attribute="height" from="0.2" to="0.8" direction="alternate" repeat="indefinite"
      dur="1500"></a-animation>
    <a-animation id="navAniColour" attribute="color" from="white" to="red" direction="alternate" repeat="indefinite"
      dur="1500"></a-animation>

  </a-assets>
  <a-entity id="treehouse" obj-model="obj: #treehouse-obj; mtl: #treehouse-mtl" position="-12.9 -0.28 -10.12"
    scale="0.7 0.9 0.7" rotation="0 89.73 0"></a-entity>
  <a-entity id="farm" obj-model="obj: #farm-obj; mtl: #farm-mtl" position="-6.7 4.988 200" scale="0.3 0.3 0.3"
    rotation="0 140 0"></a-entity>
  <a-entity id="fort" obj-model="obj: #fort-obj; mtl: #fort-mtl" position="-32.7 1 -169.3" scale="0.4 0.4 0.3"
    rotation="0 140 0"></a-entity>
  <a-entity id="fence2_0" obj-model="obj: #fence2-obj; mtl: #fence2-mtl" position="-12.086 1 14.473" scale="1 1 1"
    rotation="0 0 0"></a-entity>
  <a-entity id="fence2_1" obj-model="obj: #fence2-obj; mtl: #fence2-mtl" position="-5.670 1 14.473" scale="1 1 1"
    rotation="0 0 0"></a-entity>
  <a-entity id="fence2_2" obj-model="obj: #fence2-obj; mtl: #fence2-mtl" position="0.872 1 14.473" scale="1 1 1"
    rotation="0 0 0"></a-entity>
  <a-entity id="fence2_3" obj-model="obj: #fence2-obj; mtl: #fence2-mtl" position="7.436 1 14.473" scale="1 1 1"
    rotation="0 0 0"></a-entity>
  <a-entity id="fence2_4" obj-model="obj: #fence2-obj; mtl: #fence2-mtl" position="-16.289 1 9.976" scale="1 1 1"
    rotation="0 90 0"></a-entity>
  <a-entity id="fence2_5" obj-model="obj: #fence2-obj; mtl: #fence2-mtl" position="-16.289 1 3.222" scale="1 1 1"
    rotation="0 90 0"></a-entity>
  <a-entity id="fence2_6" obj-model="obj: #fence2-obj; mtl: #fence2-mtl" position="-16.289 1 -3.621" scale="1 1 1"
    rotation="0 90 0"></a-entity>
  <a-entity id="log" obj-model="obj: #log-obj; mtl: #log-mtl" position="28.335 1 12.778" scale="1.770 1.790 1.810"
    rotation="0 -134.750 0"></a-entity>
  <a-entity id="owl" obj-model="obj: #owl-obj; mtl: #owl-mtl" position="27.901 2.220 14.713" scale="0.02 0.02 0.02"
    rotation="0 -136.150 0"></a-entity>
  <a-entity id="iceberg_0" obj-model="obj: #iceberg-obj; mtl: #iceberg-mtl" position="-78.164 6.475 68.315"
    scale="0.050 0.050 0.050" rotation="108.240 45 0"></a-entity>
  <a-entity id="iceberg_1" obj-model="obj: #iceberg-obj; mtl: #iceberg-mtl" position="-79.574 -0.830 66.572"
    scale="0.110 0.070 0.030" rotation="90 45 0"></a-entity>
  <a-entity id="goat" obj-model="obj: #goat-obj; mtl: #goat-mtl" position="-77.277 16.555 64.357" scale="0.02 0.02 0.02"
    rotation="0 45 0"></a-entity>

  <a-box id="farmground" scale="65 8 45" position="-7.7 2.185 193" color="#bfbf57" opacity="1"></a-box>
  <a-gltf-model src="assets/Wood Bridge and Environment .gltf" scale="0.007 0.007 0.007" position="-2 0.29 -8.9">
  </a-gltf-model>
  <a-gltf-model src="assets/Wood Bridge .gltf" scale="0.007 0.007 0.007" position="9.656 -0.77 -8.9"
    rotation="0 0 -13.38"></a-gltf-model>

  <!-- <a-entity particle-system="
         preset: dust;
         color:#42bcf4, #9bd5ef, #fff;
         particleCount:4000;
         positionSpread:50 0.2 1;
         maxAge: 3;
         dragValue: 0.2;
         type: 2;
         "
       rotation="90 38 110" position="34.5 5.7 -0.4">
     </a-entity> -->

  <a-entity scale="3.3 3.7 3" rotation="0 -125 0" position="0 -0.216 0" environment="preset: forest; dressingAmount: 380;
        fog: 0.35; ground: canyon;
        groundTexture: walkernoise;
        groundColor2: #fcd876; groundColor: #f6c84c;
        dressingScale: 1; dressingVariance: 1.5 2.5 1.5; dressingColor: #2b5412;
        groundYScale: 4;">
  </a-entity>

  <!-- Moving order is dependend on element order below! -->
  <a-entity id="navigationBox">
    <a-cylinder data-target="1" position="9 8 19" height=".25" radius="0.5"></a-cylinder>
    <a-cylinder data-target="2" position="26.4 11.2 13.2" height=".25" radius="0.5"></a-cylinder>
    <a-cylinder data-target="3" position="31.4 13.47 -0.9" height=".25" radius="0.5"></a-cylinder>
    <a-cylinder data-target="4" position="-3 8 0" height=".25" radius="0.5"></a-cylinder>
    <a-cylinder data-target="5" position="5 6 0" height=".25" radius="0.5"></a-cylinder>
  </a-entity>

  <a-camera id="camera" position="0 7 0">
    <a-entity id="cursor" cursor="fuse: true; fuseTimeout: 1500" position="0 0 -1"
      geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.015" material="color: red; shader: flat">
      <a-animation begin="click" easing="ease-in" attribute="scale" dur="150" fill="forwards" from="0.1 0.1 0.1"
        to="1 1 1"></a-animation>
      <a-animation begin="cursor-fusing" delay="500" easing="ease-in" attribute="scale" dur="2000" fill="backwards"
        from="1 1 1" to="0.1 0.1 0.1"></a-animation>
    </a-entity>
  </a-camera>

</a-scene>

<script>
  files = [
    'js/vr_logic/movement.js',
    'js/vr_logic/waves.js',
  ]

  files.forEach(filename => {
    stateController.loadJsFile(filename)
  });
</script>